# 02-1 이더넷

- 이더넷이라는 공통된 기술로 '물리 계층' - '데이터 링크 계층'은 서로 밀접하게 연관되어 있음.
- 이더넷 Ethernet : 현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술
  + 다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법 등이 정의된 네트워크 기술

## 이더넷 표준
- 오늘날 유선 LAN 환경은 대부분 이더넷을 기반으로 구성됨.
- 예시) 만약 유선 LAN 환경을 구축했다면, 물리 계층에서는 이더넷 규격 케이블, 데이터 링크 계층에서 주고받는 프레임은 이더넷 프레임의 형식을 따를 것임.
- 이더넷의 국제적 표준화 IEEE 802.3
  + 이더넷 관련 다양한 표준들의 모음을 의미하는 것.
  + 802.3, 802.3u, 802.3ab처럼 많은 표준이 있지만, 지원되는 네트워크 장비, 통신 매체의 종류와 전송 속도 등이 달라질 수 있다는 점

### 통신 매체 표기 형태
[전송 속도]BASE[-추가 특성]
- 1000BASE-LR4
  + 1000 : 전송 속도
  + R : 물리 계층에서의 인코딩 방식
  + 4 : 비트를 전송할 전송로(레인) 수


1. 전송 속도 data rate
- 숫자만 표기되어 있으면 Mbps 속도, 숫자 뒤에 G가 붙는 경우 Gbps 속도를 의미.

2. BASE (베이스밴드 BASEband)
- 베이스밴드 BASEband의 약자로, 변조 타입 modulation type을 의미
  + 변조 타입 : 비트 신호로 변환된 데이터를 통신 매체로 전송하는 방법을 의미
- (개발과는 다소 거리가 있음. 일반적인 LAN 환경에서는 디지털 신호를 송수신하는 베이스밴드 방식을 사용)

3. 추가 특성 addtional distinction
- 통신 매체의 특성을 명시함. (다양한 특성의 종류가 있음)
  + 전송 가능한 최대 거리
  + 물리 계층 인코딩 방식 (데이터가 비트 신호로 변환되는 방식)
  + 레인 수 (비트 신호를 옮길 수 있는 전송로 수를 의미)


### 통신 매체 종류
|추가 특성 표기(통신 매체의 종류)|케이블 종류|
|---|---|
|C|동축 케이블|
|T|트위스티드 페어 케이블|
|S|단파장 광섬유 케이블|
|L|장파장 광섬유 케이블|



## 이더넷 프레임 ethernet frame
![image](https://github.com/user-attachments/assets/1554974d-a2c5-41b0-9166-74daf8859f87)

- 헤더 : 프리앰블, 수신지 MAC 주소, 송신지 MAC 주소, 타입/길이
- 페이로드 : 데이터
- 트레일러 : FCS

### 프리앰블 preamble
- 프리앰블은 송수신지 간의 동기화를 위해 사용되는 정보
- 이더넷 프레임의 시작을 알리는 8바이트(64비트) 크기의 정보
- 첫 7바이트는 10101010 값을 가짐, 마지막 바이트는 101010**11** 값을 가짐 → 수신자는 이 프리앰블을 통해 이더넷 프레임이 오고 있음을 알아차림.

### 수신지 MAC 주소와 송신지 MAC 주소
- MAC 주소 '물리적 주소' : 네트워크 인터페이스마다 부여되는 6바이트(48비트) 길이의 주소로, LAN 내의 수신지와 송신지를 특정 가능함.
- *일반적*으로 고유하고, 변경되지 않는 주소로써 네트워크 인터페이스마다 부여됨. (NIC, Network Interface Controller라는 장치가 네트워크 인터페이스 역할을 담당함)
  + 한 컴퓨터에 NIC가 여러 개 있다면 MAC주소도 여러 개임.
 
### 타입 type / 길이 length
- 필드에 명시된 크기가 1500(16진수 05DC) 이하일 경우 : 해당 필드는 프레임의 크기(길이)를 나타내는 데 사용
- 필드에 명시된 크기가 1536(16진수 0600) 이상일 경우 : 해당 필드는 타입을 나타내는 데 사용

|타입|프로토콜|
|---|---|
|0800|IPv4|
|86DD|IPv6|
|0806|ARP|

### 데이터
- 네트워크 계층의 데이터와 헤더를 합친 PDU가 포함됨. (최대 크기 1500바이트, 최소 46바이트 이상)
  + 패딩 padding : 그 이하 데이터라면 크기를 맞추기 위해 정보가 내부에 0으로 채워짐.
 
### FCS, Frame Check Sequence
- 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드. CRC 값이 들어감
  + 데이터 링크 계층에서 오류 검출이 이루어지기도 하는데 이때 사용됨.
- CRC, Cyclic Redundancy Check (순환 중복 검사) : 오류 검출용 값
  + 송신지는 프리앰블을 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 후, 이 값을 FCS 필드에 명시함.
  + 수신지는 수신한 프레임에서 프리앰블과 FCS 필드를 제외한 나머지 필드 값들을 바탕으로 CRC 값을 계산한 뒤, 이 값을 FCS 필드 값과 비교함. => 비교 값이 일치하지 않다면, 오류가 있다고 판단하여 해당 프레임을 폐기함.
 
## 토큰 링 Token Ring
- 호스트들이 링(고리) 형태로 연결됨.
- 호스트끼리 돌아가며 토큰이라는 특별한 정보를 주고받음
  + 네트워크 내 다른 호스트에게 메시지를 송신하려면 반드시 이 토큰을 가지고 있어야 함.
  + ![image](https://github.com/user-attachments/assets/28fd3182-2336-4480-a73c-c80e8ca436b5)

  
# 02-2 NIC와 케이블
- NIC, Network Interface Controller : 호스트와 통신 매체를 연결하고, MAC 주소가 부여되는 네트워크 장비
  + 물리 계층의 유선 통신 매체인 케이블로 연결됨.
  + 케이블의 종류 : 트위스티드 페어 케이블 / 광섬유 케이블

## NIC
- 통신 매체를 통해 전달되는 신호와 컴퓨터가 이해할 수 있는 정보 간에 변환이 이루어져야 함 -> 변환을 담당하는 네트워크 장비가 NIC
- 네트워크 인터페이스 역할 (네트워크와의 연결점을 담당)
  + 통신 매체에 흐르는 신호 ↔ 호스트가 이해하는 프레임
- MAC 주소를 통해 자기 주소는 물론, 수신되는 프레임의 수신지 주소를 인식함. 그래서 어떤 프레임이 자신에게 도달했을 때 자신과는 관련 없는 수신지 MAC 주소가 명시된 프레임이라면 폐기할 수 있고, FCS 필드를 토대로 오류를 검출해 잘못된 프레임을 폐기할 수도 있음.

## 트위스티드 페어 케이블, twisted pair cable

## 광섬유 케이블, fiber optic cable

### 싱글 모드 광섬유 케이블

### 멀티 모드 광섬유 케이블


# 02-3 허브
- 허브 : 물리 계층 네트워크 장비.
- 스위치 : 데이터 링크 계층 네트워크 장비.


## 주소 개념이 없는 물리 계층
- 물리 계층 : 주소 개념이 존재X
  + 단지 호스트와 통신 매체 간의 연결과 통신 매체상의 송수신이 이루어질 뿐.
  + 물리 계층의 네트워크 장비는 송수신되는 정보에 대한 어떠한 조작이나 판단을 하지 않음.
- 데이터 링크 계층 : 송수신지를 특정할 수 있는 주소를 가지기 시작함 (MAC주소)
  + MAC주소로 데이터 링크 계층 이상 계층은 송수신지를 특정할 수 있음
  + 주소를 바탕으로 송수신되는 정보에 대한 조작과 판단 가능

## 허브
- 허브 hub / 리피터 허브 repeater hub : 여러 대의 호스트를 연결하는 장치
### 허브의 특징
1. 전달받은 신호를 다른 모든 포트로 그대로 다시 내보냄
- 허브는 물리 계층에 존재 : 물리 계층에선 주소 개념이 없음. 따라서 수신자를 특정할 수 없음.
- 그러므로 신호를 전달밥ㄷ으면 어떠한 조작이나 판단을 하지 않고 송신지를 제외한 모든 포트에 내보내기만 함. → 이 신호를 전달받은 호스트는 데이터 링크 계층에서 MAC주소를 확인하고, 필요 없으면 폐기함.
2. 반이중 (half duplex) 모드로 통신함
- 반이중 모드 : 송수신을 번갈아 가면서 하는 통신 방식 (왕복 1차선 도로)
- 전이중 모드 (full duplex) : 송수신을 동시에 양방향으로 할 수 있는 통신 방식 (왕복 2차선 도로)
### 콜리전
![image](https://github.com/user-attachments/assets/332ef872-ec65-4f35-8a08-bc61fcc65935)
- 충돌collision : 동시에 허브에 신호를 송신하면, 두 신호가 충돌하면서 콜리전 발생. (반이중 모드이므로 하나밖에 못함)
- 콜리전 도메인 : 충돌이 발생할 수 있는 영역. (허브에 연결된 모든 호스트는 같은 콜리전 도메인에 속함) → 넓은 콜리전 도메인을 줄이기 위해 CSMA/CD 프로토콜을 사용하거나 스위치 장비를 사용함.
### CSMA/CD (Carrier Sense Multiple Access with Collision Detection)
- 특징
  1. Carrier sense 캐리어 감지
  - 메시지를 보내기 전에 현재 네트워크 상에서 전송 중인 것이 있는지는를 확인하는 것. (현재 통신 매체의 사용 가능 여부 검사)
  2. Multiple Access 다중 접근
  - 캐리어 감지를 함에도 불구, 두 개 이상의 호스트가 동시에 네트워크를 사용할 수도, 이를 다중 접근 상황이라고 함.
  3. Collision Detection 충돌 검출
  - 충돌을 감지하면 전송이 중단되고, 충돌을 검출한 호스트는 다른 이들에게 충돌이 발생했음을 알리고자 잼 신호(jam signal)라는 특별한 신호를 보냄. 그리고 임의 시간 동안 기다린 후 다시 전송.
- 순서
  1. 먼저 현재 전송이 가능한 상태인지를 확인하고,
  2. 다른 호스트가 전송 중이지 않을 때 메시지를 전송합니다.
  3. 만일 부득이하게 다수의 호스트가 접근하여 충돌이 발생하면 임의의 시간만큼 대기한 후에 다시 전송합니다.


# 02-4 





